@model ExaminationViewModel
@{
    ViewData["Title"] = "Reviewing results for quiz #" + @Model.Id;
}

<div class="container text-center">
    <h3 class="mb-3 mt-4">@ViewData["Title"]</h3>

    <table class="table">
        <thead>
            <tr>
                <th>
                    Quiz name
                </th>
                <th>
                    Quiz category
                </th>
                <th>
                    Username
                </th>
                <th>
                    Points
                </th>
                <th>
                    Quiz max points
                </th>
                <th>
                    Date taken
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    @Model.QuizName
                </td>
                <td>
                    @Model.QuizCategoryName
                </td>
                <td>
                    @Model.ApplicationUserUserName
                </td>
                <td>
                    @Model.Points
                </td>
                <td>
                    @Model.QuizMaxPoints
                </td>
                <td>
                    <time datetime="@Model.CreatedOn.ToString("O")">
                        @Model.CreatedOn.ToString("g")
                    </time>
                </td>
            </tr>
        </tbody>
    </table>

    <table>
        @foreach (var question in @Model.Questions)
        {
            <div class="text-center mb-5">
                <h4>
                    @question.Content - @question.Points points
                </h4>

                <hr class="mr-5 ml-5">

                @foreach (var answer in @question.Answers)
                {
                    var isCorrectStyle = answer.IsCorrect ? "correct" : "wrong";

                    <div>
                        <span class="@isCorrectStyle">
                            @Html.DisplayFor(modelItem => answer.Content)
                        </span>

                        @{
                            var chosenByUser = @Model.Choices.Any(x => x.QuestionId == question.Id && x.UserAnswerId == answer.Id);
                        }

                        @if (chosenByUser)
                        {
                            <span>- Your choice.</span>
                        }
                    </div>
                }
            </div>
        }
    </table>

    <a asp-area="" asp-controller="Quiz" asp-action="Dashboard" class="btn btn-sm btn-outline-dark">
        <i class="fas fa-arrow-left"></i> Back to dashboard
    </a>
</div>